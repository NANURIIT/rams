<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nanuri.rams.business.common.mapper.RAA93BMapper">
	
<select id="selectMenuList" resultType="com.nanuri.rams.business.common.vo.RAA93BVO$MenuListVO" parameterType='String'>
	/* 메뉴별권한관리 메뉴명 조회 */
		SELECT A.LV1_ID
			 , A.LV1_NM
			 , B.LV2_ID
			 , B.LV2_NM
			 , C.LV3_ID
			 , C.LV3_NM
		  FROM (SELECT MENU_ID LV1_ID
					 , MENU_NM LV1_NM
					 , URL_DVD_CD
				  FROM RAA93B
				 WHERE MENU_LV = 1) A
     LEFT JOIN (SELECT B.LV2_ID
   					 , B.LV2_NM
					 , B.URL_DVD_CD
				  FROM (SELECT MENU_ID LV2_ID
							 , MENU_NM LV2_NM
							 , URL_DVD_CD
						  FROM RAA93B
					     WHERE MENU_LV = 2) B) B
			ON A.URL_DVD_CD = B.URL_DVD_CD
	 LEFT JOIN (SELECT C.LV3_ID
   					 , C.LV3_NM
					 , C.URL_DVD_CD
				  FROM (SELECT MENU_ID LV3_ID
							 , MENU_NM LV3_NM
							 , URL_DVD_CD
						  FROM RAA93B
					     WHERE MENU_LV = 3) C) C
			ON B.URL_DVD_CD = C.URL_DVD_CD
		 WHERE 1=1
		<if test='menuNm != null and menuNm != ""'>
		   AND (A.LV1_NM LIKE CONCAT('%', #{menuNm}, '%')
				OR B.LV2_NM LIKE CONCAT('%', #{menuNm}, '%')
				OR C.LV3_NM LIKE CONCAT('%', #{menuNm}, '%'))
		</if>
	  ORDER BY A.LV1_ID ASC
</select>

</mapper>